---
title: 시간 데이터 관리, ISO 8601 표준이 답이 될 수 있을까?
tag: Server
description: 국제 시간 표준 ISO 8601과 시간 형식에 대한 고민
thumbnail: /images/thumbnail/database.png
createdAt: 2025.04.11
fileName: 2025-04-11-iso8601
---

날짜와 시간 데이터를 다룰 때, 어떤 형식을 사용할지 고민해 본 적 있으신가요?
저는 시간 데이터를 다루면서 종종<br/> `2025-04-11T16:29:40Z`와 같은 포맷을 마주치곤 했습니다.
처음에는 자바스크립트의 기본 날짜 표기 방식인가 싶기도 했죠. 하지만 이 형식은 ISO 8601이라는
국제 표준에 따른 것이었습니다. ISO 8601을 알아보고 실제로 적용해 보면서 느꼈던 점들을 이야기해 보려고 합니다.

## Timezone

여러 프로젝트를 개발하면서, 한국이니까 당연히 시간대는 한국에 맞춰야지 하며 시간대를 그저 Asia/Seoul로 설정하는
것을 당연하게 여기던 때가 있었습니다. 한국에서만 쓰일 어플리케이션이라면 문제 될 게 없겠지만, 만약 다른 시간대
사용자들을 고려하여 기능을 확장해야 한다면 어떨까요? 이 부분에 대한 확실한 기준을 세워야겠다는 필요성을 느꼈고
고민하던 중 ISO 8601에 대한 내용을 알게되었습니다.

## ISO 8601

ISO 8601이란 `국제표준화기구(ISO)`에서 지정한 날짜와 시간 데이터에 대한 표준 규격입니다.
나라마다 날짜 및 시간 표기 방법이 다르고 같은 나라 내에서도 여러 방식이 혼용 되는 경우가 많은데요
명백한 기준을 통해 날짜와 시간 표현에 대한 오해를 줄이고자하는 목적에 의해 정의되었다고합니다.
연도는 네 자리인 YYYY, 월과 일은 두자리로 MM, DD로 나타내며 시간은 24시간으로 시는 hh, 분은 mm
초는 ss로 hh:mm:ss 또는 hhmmss로 나타냅니다. 날짜와 시간을 함께 표기할땐 그 사이에 T를 넣고
맨 뒤에는 표준 시간대를 +hh:mm 형식으로 붙이거나 UTC에 경우 Z를 붙여<br/>
`2025-04-11T09:15:05Z`나 `2025-04-11T18:15:05+09:00`와 같은 형태로 나타냅니다.

## 적용

```javascript
  @Entity({ name: 'comments' })
  export class Comment {
    @PrimaryGeneratedColumn({ type: 'int' })
    id: number;

    @Column({ type: 'text' })
    comment: string;

    @Column({ type: 'timestamp', default: () => 'CURRENT_TIMESTAMP' })
    createdAt: Date;
  }
```

예시의 `createdAt`컬럼은 서버 시간을 기준으로 시간을 저장하고 조회 시엔 UTC를 기준 ISO 8601 포맷으로 변환됩니다.
이때 서버 시간과 TypeORM의 시간대 설정이 일치하지 않으면 예기치 못한 시간 변환 문제가 발생할 수 있습니다.
따라서 UTC를 기준으로 시간대를 통일해 혼동을 막고 일관성을 유지하며 조회 시 클라이언트 시간대에 맞춰 변환하여 데이터를
제공하는게 적절한 방법이라고 판단했습니다.
<br/>

시간 데이터 관리에 대해 테스팅하고 알아보면서 예기치 못하게 시간대가 변환되는 경우가 생각보다 잦았습니다.
데이터를 어떻게 다룰것인가에 설계도 중요하지만 현재 개발 환경에 대한 이해도와 구조 파악 또한 중요하다는걸 느꼈습니다.